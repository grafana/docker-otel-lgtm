---
# OATS is an acceptance testing framework for OpenTelemetry
# https://github.com/grafana/oats/tree/main/yaml
oats-schema-version: 2
docker-compose:
  files:
    - ./docker-compose.oats.yml
input:
  - path: /rolldice
expected:
  traces:
    - traceql: '{ span.http.route = "/rolldice" }'
      equals: "/rolldice"
      attributes:
        otel.library.name: go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp
  metrics:
    - promql: "go_goroutine_count{}"
      value: "> 0"
